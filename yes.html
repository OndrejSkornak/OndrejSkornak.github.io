<!doctype html>
<html lang="sk">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Jup√≠, vedel som to!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;700&family=Yeseva+One&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-light: #fff6ef;
        --bg-warm: #ffd6dd;
        --bg-deep: #ffb7c9;
        --ink: #4a2b2b;
        --accent: #e63946;
        --card: #fff9f4;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        display: grid;
        place-items: center;
        font-family: "Manrope", "Segoe UI", sans-serif;
        color: var(--ink);
        background:
          radial-gradient(circle at 12% 20%, #fff9f4 0%, var(--bg-light) 35%, transparent 60%),
          radial-gradient(circle at 86% 18%, #ffe3d6 0%, transparent 50%),
          radial-gradient(circle at 50% 90%, var(--bg-warm) 0%, var(--bg-deep) 70%);
        overflow: hidden;
      }

      /* Floating background hearts */
      .bg-hearts {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 0;
        overflow: hidden;
      }

      .bg-heart {
        position: absolute;
        font-size: var(--size, 22px);
        opacity: 0;
        animation: bg-float var(--dur, 8s) ease-in-out infinite;
        animation-delay: var(--delay, 0s);
        left: var(--left, 50%);
        color: rgba(230, 57, 70, var(--opa, 0.12));
        filter: blur(var(--blur, 0px));
      }

      @keyframes bg-float {
        0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { transform: translateY(-10vh) rotate(var(--rot, 45deg)); opacity: 0; }
      }

      .card {
        position: relative;
        width: min(860px, 92vw);
        padding: 44px 28px 42px;
        border-radius: 28px;
        background: linear-gradient(160deg, rgba(255,255,255,0.97), rgba(255,249,244,0.95), rgba(255,240,243,0.92));
        box-shadow:
          0 26px 70px rgba(161, 73, 92, 0.22),
          0 0 0 1px rgba(230, 57, 70, 0.1),
          inset 0 1px 0 rgba(255,255,255,0.8);
        border: 1px solid rgba(230, 57, 70, 0.15);
        text-align: center;
        animation: float-in 900ms ease-out both;
        z-index: 1;
        backdrop-filter: blur(12px);
      }

      h1 {
        margin: 0 0 20px;
        font-size: clamp(2rem, 4.2vw, 3rem);
        letter-spacing: 0.4px;
        font-family: "Yeseva One", "Times New Roman", serif;
        font-weight: 400;
        background: linear-gradient(135deg, #e63946, #ff6b81, #e63946);
        background-size: 200% 200%;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        animation: gradient-shift 4s ease-in-out infinite;
      }

      @keyframes gradient-shift {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }

      .media {
        position: relative;
        min-height: clamp(260px, 44vw, 420px);
      }

      .panel {
        position: absolute;
        inset: 0;
        display: grid;
        place-items: center;
        gap: 18px;
        transition: opacity 600ms ease, transform 600ms ease;
      }

      .panel.hidden {
        opacity: 0;
        transform: translateY(12px) scale(0.98);
        pointer-events: none;
      }

      .gif {
        width: min(200px, 52vw);
        height: auto;
      }

      .meter-card {
        width: min(360px, 80vw);
        padding: 20px 22px 18px;
        border-radius: 22px;
        background: rgba(255, 249, 244, 0.96);
        border: 1px solid rgba(230, 57, 70, 0.2);
        box-shadow: 0 18px 36px rgba(230, 57, 70, 0.18);
      }

      .meter-title {
        font-family: "Yeseva One", "Times New Roman", serif;
        font-size: 1.3rem;
        margin-bottom: 10px;
      }

      .meter-bar {
        position: relative;
        height: 12px;
        border-radius: 999px;
        background: #ffe3e8;
        overflow: hidden;
        margin: 12px 0 10px;
      }

      .meter-fill {
        position: absolute;
        inset: 0;
        width: 0%;
        background: linear-gradient(120deg, #ff91a4, #ff5c6c, #ff91a4);
        background-size: 200% 100%;
        animation: meter-shimmer 2s ease-in-out infinite;
        transition: width 240ms ease;
      }

      @keyframes meter-shimmer {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }

      .meter-value {
        font-size: 1.2rem;
        font-weight: 700;
      }

      .meter-note {
        font-size: 0.95rem;
        color: #6a3a3a;
      }

      .polaroid {
        padding: 14px 14px 32px;
        border-radius: 20px;
        background: #fff;
        box-shadow:
          0 22px 48px rgba(230, 57, 70, 0.2),
          0 0 0 1px rgba(230, 57, 70, 0.08);
        transform: rotate(-2deg);
        transition: transform 400ms cubic-bezier(0.22,1,0.36,1), box-shadow 400ms ease;
        animation: polaroid-in 700ms ease-out both;
      }

      @keyframes polaroid-in {
        from { transform: rotate(-8deg) scale(0.85); opacity: 0; }
        to { transform: rotate(-2deg) scale(1); opacity: 1; }
      }

      .polaroid:hover {
        transform: rotate(0deg) scale(1.03);
        box-shadow: 0 28px 52px rgba(230, 57, 70, 0.28);
      }

      .photo {
        width: min(420px, 78vw);
        height: auto;
        display: block;
        border-radius: 14px;
      }

      .caption {
        margin-top: 16px;
        font-size: 1.05rem;
        color: #6a3a3a;
      }

      .actions {
        margin-top: 26px;
        display: flex;
        justify-content: center;
      }

      .repeat {
        border: 1px solid rgba(230, 57, 70, 0.3);
        background: linear-gradient(135deg, #fff4f4, #ffe8ec);
        color: var(--accent);
        border-radius: 999px;
        padding: 12px 28px;
        font-weight: 600;
        font-size: 1rem;
        cursor: pointer;
        transition: transform 200ms cubic-bezier(0.22,1,0.36,1), box-shadow 200ms ease;
      }

      .repeat:hover {
        transform: translateY(-2px);
        box-shadow: 0 14px 24px rgba(230, 57, 70, 0.2);
      }

      .repeat:active {
        transform: translateY(0);
      }

      @keyframes float-in {
        from {
          opacity: 0;
          transform: translateY(16px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @media (max-width: 560px) {
        .card {
          padding: 36px 20px 32px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Floating background hearts -->
    <div class="bg-hearts" aria-hidden="true"></div>

    <main class="card">
      <h1>üíñ Jup√≠, vedel som to! üíñ</h1>
      <div class="media">
        <div class="panel" id="meterWrap">
          <div class="meter-card">
            <div class="meter-title">Love meter</div>
            <div class="meter-bar">
              <span class="meter-fill" id="meterFill"></span>
            </div>
            <div class="meter-value" id="meterValue">0%</div>
            <div class="meter-note" id="meterNote">Nab√≠jam l√°sku...</div>
          </div>
        </div>
        <div class="panel hidden" id="gifWrap">
          <!-- Celebratory/love GIF -->
          <img
            class="gif"
            src="https://media.tenor.com/gUiu1zyxfzYAAAAi/bear-kiss-bear-kisses.gif"
            alt="Kiss Bear"
          />
          <div class="caption">Oslavujeme!</div>
        </div>
        <div class="panel hidden" id="photoWrap">
          <div class="polaroid">
            <img class="photo" src="valent√≠n_us.png" alt="Na≈°a fotka" />
          </div>
        </div>
      </div>
      <div class="actions">
        <button class="repeat" id="againButton" type="button">E≈°te raz</button>
      </div>
    </main>

    <script>
      const meterWrap = document.getElementById("meterWrap");
      const meterFill = document.getElementById("meterFill");
      const meterValue = document.getElementById("meterValue");
      const meterNote = document.getElementById("meterNote");
      const gifWrap = document.getElementById("gifWrap");
      const photoWrap = document.getElementById("photoWrap");
      const againButton = document.getElementById("againButton");

      const randomBetween = (min, max) => min + Math.random() * (max - min);

      // Generate floating background hearts
      const bgHearts = document.querySelector('.bg-hearts');
      const heartChars = ['‚ù§', 'üíï', '‚ô•', 'üíó', 'üíñ'];
      for (let i = 0; i < 16; i++) {
        const h = document.createElement('span');
        h.className = 'bg-heart';
        h.textContent = heartChars[i % heartChars.length];
        h.style.setProperty('--left', `${randomBetween(3, 97)}%`);
        h.style.setProperty('--dur', `${randomBetween(7, 14)}s`);
        h.style.setProperty('--delay', `${randomBetween(0, 10)}s`);
        h.style.setProperty('--size', `${randomBetween(14, 32)}px`);
        h.style.setProperty('--rot', `${randomBetween(-30, 30)}deg`);
        h.style.setProperty('--opa', `${randomBetween(0.06, 0.18)}`);
        h.style.setProperty('--blur', `${randomBetween(0, 2)}px`);
        bgHearts.appendChild(h);
      }

      const buzz = (pattern = 15) => {
        if (typeof navigator !== "undefined" && navigator.vibrate) {
          navigator.vibrate(pattern);
        }
      };

      const updateMeter = (value) => {
        meterFill.style.width = `${value}%`;
        meterValue.textContent = `${Math.round(value)}%`;
      };

      const showPhoto = () => {
        gifWrap.classList.add("hidden");
        photoWrap.classList.remove("hidden");
      };

      const showGif = () => {
        meterWrap.classList.add("hidden");
        gifWrap.classList.remove("hidden");
        setTimeout(showPhoto, 2400);
      };

      const startMeter = () => {
        let value = 0;
        updateMeter(0);
        const interval = setInterval(() => {
          value = Math.min(97, value + randomBetween(2, 6));
          updateMeter(value);
          if (value >= 97) {
            clearInterval(interval);
            meterNote.textContent = "Takmer...";
            setTimeout(() => {
              updateMeter(100);
              meterValue.textContent = "100% üíò";
              meterNote.textContent = "Jasn√© √ÅNO!";
              buzz([20, 40, 20]);
              setTimeout(showGif, 700);
            }, 650);
          }
        }, 120);
      };

      againButton.addEventListener("click", () => {
        buzz(18);
        window.location.href = "index.html";
      });

      startMeter();
    </script>
  </body>
</html>
